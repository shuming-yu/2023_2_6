<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<title>Document</title>
</head>

<body>
  <a href="/01. intro.html">01. intro.html</a>
  <a href="/02. diff-with-function.html">02. diff-with-function.html</a>
  <a href="/03. exercise.html">03. exercise.html</a>

  <h1>箭頭函式實戰用法</h1>

  <h3><a href="https://www.casper.tw/javascript/2017/06/29/es6-native-array/">1. JavaScript 陣列處理方法</a></h3>
  <h3><a href="https://30secondsofknowledge.com/">2. 方法參考</a></h3>


  <script>
    // 搭配陣列方法
    // 參考：https://wcc723.github.io/javascript/2017/06/29/es6-native-array/

    // 陣列內所有值都需要調整時, 可使用 map
    // 1. 陣列雙倍
    function sample_arrDouble(){
      const arr = [15, 12, 63, 67, 1421, 124, 567, 235, 12, 45];
      // 1. 傳統函式
      const arrDouble = arr.map(function(num) {
        return num * 2;
      })

      // 2. 箭頭函式
      // const arrDouble = arr.map(num => num * 2);
      // console.log("arrDouble:", arrDouble);
    }


    // 2. 物件內 this
    function sample_this(){
      const person = {
        keepData: {},

        getData: function() {
          const vm = this;
          $.ajax({
            url: 'https://randomuser.me/api/',
            dataType: 'json',
  
            // 傳統函式 - 使用 const vm = this;
            success: function(data) {
              console.log("this", this);
              console.log("data:", data);
              console.log("this.keepData", vm.keepData);
              vm.keepData = data.results[0];
              console.log('person.data', person.keepData);
            }
  
            // 箭頭函式
            // success: (data) => {
            //   console.log("this", this);  // 指向person
            //   console.log("data:", data);
            //   console.log("this.keepData", this.keepData);
            //   this.keepData = data.results[0];
            //   console.log('person.data', person.keepData);
            // }
          });
        }
      }
      person.getData();
    }


  </script>
</body>

</html>